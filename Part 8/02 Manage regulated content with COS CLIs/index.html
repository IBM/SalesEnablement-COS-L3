
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IBM Cloud Object Storage Level 3 Demonstration Guide">
      
      
        <meta name="author" content="Andrew R. Jones (andrewj@us.ibm.com)">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.0">
    
    
      
        <title>Manage regulated content - IBM Cloud Object Storage Level 3 Demonstration Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="IBM Cloud Object Storage Level 3 Demonstration Guide" class="md-header__button md-logo" aria-label="IBM Cloud Object Storage Level 3 Demonstration Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBM Cloud Object Storage Level 3 Demonstration Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Manage regulated content
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IBM Cloud Object Storage Level 3 Demonstration Guide" class="md-nav__button md-logo" aria-label="IBM Cloud Object Storage Level 3 Demonstration Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    IBM Cloud Object Storage Level 3 Demonstration Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Part 1 - Overview of IBM Cloud Object Storage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 1 - Overview of IBM Cloud Object Storage" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Part 1 - Overview of IBM Cloud Object Storage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%201/01%20Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Part 2 - Create a COS service
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 2 - Create a COS service" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Part 2 - Create a COS service
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%202/01%20Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%202/02%20Watch/" class="md-nav__link">
        Watch a COS service being created
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%202/03%20ClickThru/" class="md-nav__link">
        Click through demonstration of a COS service being created
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Part 3 - Create a Key Protect service and root key
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 3 - Create a Key Protect service and root key" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Part 3 - Create a Key Protect service and root key
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%203/01%20Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%203/02%20Watch/" class="md-nav__link">
        Watch a Key Protect service and root key being created
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%203/03%20ClickThru/" class="md-nav__link">
        Click through demonstration of a Key Protect service and root key being created
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Part 4 - Create an service authorization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 4 - Create an service authorization" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Part 4 - Create an service authorization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%204/01%20Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%204/02%20Watch/" class="md-nav__link">
        Watch a service authorization being created
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%204/03%20ClickThru/" class="md-nav__link">
        Click through demonstration of a service authorization being created
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Part 5 - Create an Activity Tracker service
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 5 - Create an Activity Tracker service" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Part 5 - Create an Activity Tracker service
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%205/01%20Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%205/02%20Watch/" class="md-nav__link">
        Watch an Activity Tracker service being created
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%205/03%20ClickThru/" class="md-nav__link">
        Click through demonstration of an Activity Tracker service being created
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Part 6 - Create a COS bucket
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 6 - Create a COS bucket" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Part 6 - Create a COS bucket
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%206/01%20Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%206/02%20Watch/" class="md-nav__link">
        Watch a COS bucket being created
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%206/03%20ClickThru/" class="md-nav__link">
        Click through demonstration of a COS bucket being created
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Part 7 - Create COS objects
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 7 - Create COS objects" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Part 7 - Create COS objects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%207/01%20Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%207/02%20Explore%20bucket%20configuration/" class="md-nav__link">
        Explore bucket configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%207/03%20Manage%20regulated%20content/" class="md-nav__link">
        Manage regulated content
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%207/04%20Legal%20holds/" class="md-nav__link">
        Legal holds
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Part 8 - Using COS Command Line Interfaces
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 8 - Using COS Command Line Interfaces" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Part 8 - Using COS Command Line Interfaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01%20Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Manage regulated content
      </a>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Part 9 - Understanding COS Identifity and Access Management
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Part 9 - Understanding COS Identifity and Access Management" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Part 9 - Understanding COS Identifity and Access Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Part%209/01%20Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../NextSteps/" class="md-nav__link">
        Next steps
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


  <h1>Manage regulated content</h1>

<p>For this exercise, the IBM Cloud Shell will be used so no additional software is required. IBM Cloud Shell gives users complete control of their cloud resources, applications and infrastructure, from any web browser. IBM Cloud Shell provides pre-authenticated access to the latest tools and programming languages for cloud-based development, deployment and management of services and applications — all in a secure shell. IBM Cloud Shell is instantly accessible from the IBM Cloud portal.</p>
<p>The directions below do not specify to check IBM Cloud Activity Tracker, but feel free to validate all actions that access data objects (i.e. downloading objects, uploading objects) is tracked by reviewing the Activity Tracker events.</p>
<p>Follow the seps below to learn more about the COS command line interfaces.</p>
<ol>
<li>Change to the <strong>ITZ - ADHOC03</strong> account using the drop-down switcher, as shown in the GIF below.</li>
</ol>
<p><img alt="" src="../_attachments/SwitchAccounts-final.gif" /></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If the browser window is narrow, this icon: <img alt="" src="../_attachments/SwitchAccountsIcon.png" /> may appear instead of the current account name as shown in the screen capture above.</p>
</div>
<ol start="2">
<li>Click the IBM Cloud Shell icon <img alt="" src="../_attachments/CloudShellIcon.png" />.</li>
</ol>
<p><img alt="" src="../_attachments/StartCloudShell.png" /></p>
<p>The next steps are performed in using the IBM Cloud Shell window that was just opened.</p>
<ol start="3">
<li>In the top-right corner of the IBM Cloud Shell window is a square icon with an "up" arrow. Click this button to upload a file — upload the SSH key downloaded earlier.</li>
</ol>
<p>In this chapter, a similar scenario as seen in Part 7 will be used where files will be uploaded, retention periods set, and attempts to delete the objects will be made. To facilite the scenario, a script is provided that will automatically download the 6 image files to the IBM Cloud Shell environment.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Be sure to utilize the demonstration guides <strong>copy</strong> <img alt="" src="../_attachments/Usage-Clipboard.png" /> icon to avoid typographical errors in executing commands.</p>
</div>
<ol start="4">
<li>Download the script to download the images files.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>wget https://raw.githubusercontent.com/IBM/SalesEnablement-COS-L3/main/docs/includes/downloadImageFiles.bash
</code></pre></div>
<ol start="5">
<li>Execute the script to download the images files, and when prompted, enter a unique prefix to use in the file names (e.g. arj123).</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>bash ./downloadImageFiles.bash
</code></pre></div>
<ol start="6">
<li>Verify the files now exist in the IBM Cloud Shell environment.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ls *.jpg
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<p>arj123-check1.jpg  arj123-check2.jpg  arj123-check3.jpg  arj123-check4.jpg  arj123-check5.jpg  arj123-check6.jpg</p>
</details>
<p>Next, in order to use the COS CLIs, a few configuration steps must be completed.</p>
<ol start="7">
<li>Set the COS region to us-south.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>ibmcloud cos config region --region &quot;us-south&quot;
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<p>OK</p>
<p>Successfully saved default region. The program will look for buckets in the region us-south.</p>
</details>
<details class="failure">
<summary>If the command above failed...</summary>
<p>Occasionally, when creating the IBM Cloud Shell, the account may not be properly set for the shell instance.  Verify the <strong>Current account</strong> shown in top right corner of the window is set to 2305900 - ITZ - ADHOC03. If it is not properly set, close the current IBM Cloud Shell browser tab, repeat Step 1, wait a few seconds, and then continue with next steps if the <strong>Current account</strong> is set to 2305900 - ITZ - ADHOC03.      </p>
</details>
<ol start="8">
<li>Retrieve the Cloud Resource Name (CRN) for the COS service instance COS-L3-service.</li>
</ol>
<p>The -id flag returns just the CRN without additional information.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>ibmcloud resource service-instance COS-L3-service -id
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<p>Retrieving service instance COS-L3-service in all resource groups under account ITZ - ADHOC03 as andrewj@us.ibm.com...</p>
<p>crn:v1:bluemix:public:cloud-object-storage:global:a/ba0e33c9056f470ca19de009747ec654:43d07b21-b680-4d31-9d51-178f582d630c:: 43d07b21-b680-4d31-9d51-178f582d630c</p>
</details>
<ol start="9">
<li>Set Cloud Resource Name (CRN) for the COS CLI configuration to the COS service instance CRN.</li>
</ol>
<p>In the next step, multiple commands are being executed. The command from the previous step is re-run and sent to the <strong>cut</strong> command to only return first part of the output. This is then added to the command to set the CRN for the COS configuration. The -q flag is added to suppress the headers from the first command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ibmcloud cos config crn -crn `ibmcloud resource service-instance COS-L3-service -id -q | cut -f1 -d&#39; &#39;`
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<p>Saving new Service Instance ID...</p>
<p>OK</p>
<p>Successfully stored your service instance ID.</p>
</details>
<ol start="10">
<li>Verify CRN and region are set in COS CLI configuration.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>ibmcloud cos config list
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<p>Key                     Value</p>
<p>Last Updated            Monday, September 19 2022 at 21:24:46</p>
<p>Default Region          us-south</p>
<p>Download Location       /home/andrew/Downloads</p>
<p>CRN                     crn:v1:bluemix:public:cloud-object-storage:global:a/ba0e33c9056f470ca19de009747ec654:43d07b21-b680-4d31-9d51-178f582d630c::</p>
<p>AccessKeyID</p>
<p>SecretAccessKey</p>
<p>Authentication Method   IAM</p>
<p>URL Style               VHost</p>
<p>Service Endpoint</p>
</details>
<p>Notice in the output the <strong>Download Location</strong> is set to <strong>/home/<user ID>/Downloads</strong>. Since this directory doesn't exist, it needs to be created before an object download can occur.</p>
<ol start="11">
<li>Create a <strong>Downloads</strong> directory in the Cloud Shell environment.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>mkdir Downloads
</code></pre></div>
<ol start="12">
<li>List all the <strong>buckets</strong> in the COS <strong>service instance</strong>.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>ibmcloud cos buckets
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<p>OK</p>
<p>2 buckets found in your account:</p>
<p>Name                       Date Created</p>
<p>cos-l3-with-retention      Sep 15, 2022 at 20:47:08</p>
<p>cos-l3-without-retention   Sep 15, 2022 at 22:10:01</p>
</details>
<ol start="13">
<li>List the <strong>storage class</strong> of the COS bucket.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ibmcloud cos bucket-class-get -bucket cos-l3-with-retention
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<p>OK</p>
<p>Details about bucket cos-l3-bucket-1:</p>
<p>Region: us-south</p>
<p>Class: Smart</p>
</details>
<ol start="14">
<li>List the current content of a bucket.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>ibmcloud cos objects -bucket cos-l3-with-retention
</code></pre></div>
<p>Note, when executing the above command, the output will be similar to the example below but more objects may be listed as this is a shared environment.</p>
<details class="example">
<summary>Example output</summary>
<p>OK</p>
<p>Found 2 objects in bucket 'cos-l3-with-retention':</p>
<p>Name                Last Modified              Object Size</p>
<p>arj123-check2.jpg   Sep 19, 2022 at 17:28:14   101.41 KiB</p>
<p>arj123-check3.jpg   Sep 19, 2022 at 20:07:32   83.08 KiB</p>
</details>
<ol start="15">
<li>Upload a file to the COS bucket.</li>
</ol>
<p>The next command has 2 parameters that will need to be modified prior to executing them. The <strong>-key</strong> option specifies the filename for the object in COS. The <strong>-body</strong> option specifies the local file to be uploaded. A unique <strong>-key</strong> must be specified. In the commands below, change <strong>arj123-check4.jpg</strong> to one of the files downloaded earlier. Be sure to select a file that has not already been uploaded.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The command below must be modified to use the unique filename prefix specified earlier. The <strong>copy to clipboard</strong> button has been disabled as it automatically appends an enter key when pasted. Highlight the text and do a <span class="keys"><kbd class="key-control">Ctrl</kbd></span><strong>+c</strong>, <span class="keys"><kbd class="key-command">Cmd</kbd></span><strong>+c</strong>, or right click and select copy. Then paste and modify the command in IBM Cloud Shell.</p>
</div>
<p><code>ibmcloud cos object-put -bucket cos-l3-with-retention -key arj123-check4.jpg -body arj123-check4.jpg</code></p>
<p>The above command does not specify a retention period for the object. When this happens, the <strong>default</strong> value (recall this was set to 1 day for this bucket) is used. In order to specify a different value via the command line, the object content and key must be provided using Java Object Notation (JSON). Refer to the COS <a href="https://cloud.ibm.com/docs/cloud-object-storage?topic=cloud-object-storage-cli-plugin-ic-cos-cli&mhsrc=ibmsearch_a&mhq=cloud+object+storage+cli#ic-upload-s3manager" target="_blank">here</a> for more details.</p>
<details class="example">
<summary>Example output</summary>
<p>OK</p>
<p>Successfully uploaded object 'arj123-check4.jpg' to bucket 'cos-l3-with-retention'.</p>
</details>
<ol start="16">
<li>Try uploading the same file again.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Cut, paste and modify the command below, or simply use the <strong>up arrow</strong> on the keyboard to bring up the last command.</p>
</div>
<p><code>ibmcloud cos object-put —bucket cos-l3-with-retention —key arj123-check4.jpg —body arj123-check4.jpg</code></p>
<details class="example">
<summary>Example output</summary>
<p>FAILED</p>
<p>InvalidRequestForLegalReasons: The object is protected
    status code: 451, request id: b1a03a5d-6885-4114-957a-9dfdd8c57f8c, host id:</p>
</details>
<p>Why did this command fail?</p>
<details class="question">
<summary>Answer</summary>
<p>Once an object is added to a bucket with a retention policy, it cannot be updated. Objects stored in COS with buckets with a retention policy are <strong>immutable</strong>.</p>
</details>
<ol start="17">
<li>Try to download the object.</li>
</ol>
<p><code>ibmcloud cos object-get -bucket cos-l3-with-retention -key arj123-check4.jpg</code></p>
<details class="example">
<summary>Example output</summary>
<p>OK</p>
<p>Successfully downloaded 'arj123-check4.jpg' from bucket 'cos-l3-with-retention'
137.57 KiB downloaded.</p>
</details>
<ol start="18">
<li>Verify the file was downloaded.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ls -l Downloads
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<p>total 140</p>
<p>-rw-rw-r-- 1 andrewj user 140868 Sep 21 23:06 xyz123-check4.jpg</p>
</details>
<ol start="19">
<li>Try to delete the object, enter <strong>y</strong> when prompted.</li>
</ol>
<p><code>ibmcloud cos object-delete -bucket cos-l3-with-retention -key arj123-check4.jpg</code></p>
<details class="example">
<summary>Example output</summary>
<p>WARNING: This will permanently delete the object 'arj123-check4.jpg' from the bucket 'cos-l3-with-retention'.</p>
<p>Are you sure you would like to continue? [y/N]&gt; y</p>
<p>FAILED</p>
<p>InvalidRequestForLegalReasons: The object is protected</p>
<div class="highlight"><pre><span></span><code>status code: 451, request id: accdd106-db7c-4f5e-8c6d-69f6811382f2, host id:
</code></pre></div>
</details>
<p>These are just some of the COS CLIs available. Remember, COS also provides APIs and support for Amazon Web Services S3 APIs. Feel free to explore more of the COS CLIs, but keep in mind, user IDs in this shared environment have limited access so many will result in <strong>permission denied</strong> messages. Use <code>ibmcloud cos --help</code> for a full listing of the COS CLIs.</p>
<p>Proceed to the next part to learn how the Identity and Access Management (IAM) permissions were set in this demonstration environment.</p>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../01%20Introduction/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Introduction" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Introduction
            </div>
          </div>
        </a>
      
      
        
        <a href="../../Part%209/01%20Introduction/" class="md-footer__link md-footer__link--next" aria-label="Next: Introduction" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Introduction
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 IBM
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>